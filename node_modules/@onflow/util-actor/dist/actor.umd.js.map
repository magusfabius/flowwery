{"version":3,"file":"actor.umd.js","sources":["../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../../node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../../../node_modules/@babel/runtime/regenerator/index.js","../src/mailbox/index.js","../../../node_modules/queue-microtask/index.js","../src/index.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","export const mailbox = () => {\n  const queue = []\n  var next\n\n  return {\n    async deliver(msg) {\n      queue.push(msg)\n      if (next) {\n        next(queue.shift())\n        next = undefined\n      }\n    },\n\n    receive() {\n      return new Promise(function innerReceive(resolve) {\n        const msg = queue.shift()\n        if (msg) return resolve(msg)\n        next = resolve\n      })\n    },\n  }\n}\n","let promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","import {mailbox as createMailbox} from \"./mailbox\"\nimport queueMicrotask from \"queue-microtask\"\n\nexport const INIT = \"INIT\"\nexport const SUBSCRIBE = \"SUBSCRIBE\"\nexport const UNSUBSCRIBE = \"UNSUBSCRIBE\"\nexport const UPDATED = \"UPDATED\"\nexport const SNAPSHOT = \"SNAPSHOT\"\nexport const EXIT = \"EXIT\"\nexport const TERMINATE = \"TERMINATE\"\n\nconst root =\n  (typeof self === \"object\" && self.self === self && self) ||\n  (typeof global === \"object\" && global.global === global && global) ||\n  (typeof window === \"object\" && window.window === window && window)\n\nroot.FCL_REGISTRY = root.FCL_REGISTRY == null ? {} : root.FCL_REGISTRY\nvar pid = 0b0\n\nconst DEFAULT_TIMEOUT = 5000\nconst DEFAULT_TAG = \"---\"\nexport const send = (addr, tag, data, opts = {}) =>\n  new Promise((reply, reject) => {\n    const expectReply = opts.expectReply || false\n    const timeout = opts.timeout != null ? opts.timeout : DEFAULT_TIMEOUT\n\n    if (expectReply && timeout) {\n      setTimeout(\n        () =>\n          reject(new Error(`Timeout: ${timeout}ms passed without a response.`)),\n        timeout\n      )\n    }\n\n    const payload = {\n      to: addr,\n      from: opts.from,\n      tag,\n      data,\n      timeout,\n      reply,\n      reject,\n    }\n\n    try {\n      root.FCL_REGISTRY[addr] &&\n        root.FCL_REGISTRY[addr].mailbox.deliver(payload)\n      if (!expectReply) reply(true)\n    } catch (error) {\n      console.error(\n        \"FCL.Actor -- Could Not Deliver Message\",\n        payload,\n        root.FCL_REGISTRY[addr],\n        error\n      )\n    }\n  })\n\nexport const kill = addr => {\n  delete root.FCL_REGISTRY[addr]\n}\n\nconst fromHandlers =\n  (handlers = {}) =>\n  async ctx => {\n    if (typeof handlers[INIT] === \"function\") await handlers[INIT](ctx)\n    __loop: while (1) {\n      const letter = await ctx.receive()\n      try {\n        if (letter.tag === EXIT) {\n          if (typeof handlers[TERMINATE] === \"function\") {\n            await handlers[TERMINATE](ctx, letter, letter.data || {})\n          }\n          break __loop\n        }\n        await handlers[letter.tag](ctx, letter, letter.data || {})\n      } catch (error) {\n        console.error(`${ctx.self()} Error`, letter, error)\n      } finally {\n        continue __loop\n      }\n    }\n  }\n\nexport const spawn = (fn, addr = null) => {\n  if (addr == null) addr = ++pid\n  if (root.FCL_REGISTRY[addr] != null) return addr\n\n  root.FCL_REGISTRY[addr] = {\n    addr,\n    mailbox: createMailbox(),\n    subs: new Set(),\n    kvs: {},\n    error: null,\n  }\n\n  const ctx = {\n    self: () => addr,\n    receive: () => root.FCL_REGISTRY[addr].mailbox.receive(),\n    send: (to, tag, data, opts = {}) => {\n      opts.from = addr\n      return send(to, tag, data, opts)\n    },\n    sendSelf: (tag, data, opts) => {\n      if (root.FCL_REGISTRY[addr]) send(addr, tag, data, opts)\n    },\n    broadcast: (tag, data, opts = {}) => {\n      opts.from = addr\n      for (let to of root.FCL_REGISTRY[addr].subs) send(to, tag, data, opts)\n    },\n    subscribe: sub => sub != null && root.FCL_REGISTRY[addr].subs.add(sub),\n    unsubscribe: sub => sub != null && root.FCL_REGISTRY[addr].subs.delete(sub),\n    subscriberCount: () => root.FCL_REGISTRY[addr].subs.size,\n    hasSubs: () => !!root.FCL_REGISTRY[addr].subs.size,\n    put: (key, value) => {\n      if (key != null) root.FCL_REGISTRY[addr].kvs[key] = value\n    },\n    get: (key, fallback) => {\n      const value = root.FCL_REGISTRY[addr].kvs[key]\n      return value == null ? fallback : value\n    },\n    delete: key => {\n      delete root.FCL_REGISTRY[addr].kvs[key]\n    },\n    update: (key, fn) => {\n      if (key != null)\n        root.FCL_REGISTRY[addr].kvs[key] = fn(root.FCL_REGISTRY[addr].kvs[key])\n    },\n    keys: () => {\n      return Object.keys(root.FCL_REGISTRY[addr].kvs)\n    },\n    all: () => {\n      return root.FCL_REGISTRY[addr].kvs\n    },\n    where: pattern => {\n      return Object.keys(root.FCL_REGISTRY[addr].kvs).reduce((acc, key) => {\n        return pattern.test(key)\n          ? {...acc, [key]: root.FCL_REGISTRY[addr].kvs[key]}\n          : acc\n      }, {})\n    },\n    merge: (data = {}) => {\n      Object.keys(data).forEach(\n        key => (root.FCL_REGISTRY[addr].kvs[key] = data[key])\n      )\n    },\n    fatalError: error => {\n      root.FCL_REGISTRY[addr].error = error\n      for (let to of root.FCL_REGISTRY[addr].subs) send(to, UPDATED)\n    },\n  }\n\n  if (typeof fn === \"object\") fn = fromHandlers(fn)\n\n  queueMicrotask(async () => {\n    await fn(ctx)\n    kill(addr)\n  })\n\n  return addr\n}\n\n// Returns an unsubscribe function\n// A SUBSCRIBE handler will need to be created to handle the subscription event\n//\n//  [SUBSCRIBE]: (ctx, letter) => {\n//    ctx.subscribe(letter.from)\n//    ctx.send(letter.from, UPDATED, ctx.all())\n//  }\n//\nexport function subscriber(address, spawnFn, callback) {\n  spawnFn(address)\n  const EXIT = \"@EXIT\"\n  const self = spawn(async ctx => {\n    ctx.send(address, SUBSCRIBE)\n    while (1) {\n      const letter = await ctx.receive()\n      const error = root.FCL_REGISTRY[address].error\n      if (letter.tag === EXIT) {\n        ctx.send(address, UNSUBSCRIBE)\n        return\n      }\n      if (error) {\n        callback(null, error)\n        ctx.send(address, UNSUBSCRIBE)\n        return\n      }\n\n      callback(letter.data, null)\n    }\n  })\n  return () => send(self, EXIT)\n}\n\n// Returns a promise that returns a result\n// A SNAPSHOT handler will need to be created to handle the snapshot event\n//\n//  [SNAPSHOT]: (ctx, letter) => {\n//    letter.reply(ctx.all())\n//  }\n//\nexport function snapshoter(address, spawnFn) {\n  spawnFn(address)\n  return send(address, SNAPSHOT, null, {expectReply: true, timeout: 0})\n}\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_arrayLikeToArray","arr","len","arr2","Array","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","isArray","unsupportedIterableToArray","F","s","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","Promise","then","_asyncToGenerator","fn","self","args","undefined","_typeof","module","exports","__esModule","require$$0","_regeneratorRuntime","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","runtime","regenerator","regeneratorRuntime","accidentalStrictMode","globalThis","Function","mailbox","queue","deliver","msg","shift","receive","innerReceive","promise","queueMicrotask_1","queueMicrotask","cb","setTimeout","INIT","SUBSCRIBE","UNSUBSCRIBE","UPDATED","SNAPSHOT","EXIT","TERMINATE","root","global","window","FCL_REGISTRY","pid","DEFAULT_TIMEOUT","send","addr","tag","data","opts","reply","expectReply","timeout","payload","to","console","kill","fromHandlers","handlers","ctx","letter","spawn","createMailbox","subs","Set","kvs","sendSelf","broadcast","subscribe","sub","add","unsubscribe","subscriberCount","size","hasSubs","put","get","fallback","update","all","where","pattern","reduce","acc","merge","fatalError","subscriber","address","spawnFn","callback","snapshoter"],"mappings":"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"}