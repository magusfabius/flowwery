{"version":3,"sources":["../../../src/server/lib/patch-fetch.ts"],"names":["patchFetch","isEdgeRuntime","process","env","NEXT_RUNTIME","serverHooks","staticGenerationAsyncStorage","globalThis","fetch","patched","DynamicServerError","originFetch","getTracer","wrap","AppRenderSpan","kind","SpanKind","CLIENT","input","init","staticGenerationStore","getStore","next","internal","revalidate","undefined","curRevalidate","cache","includes","CACHE_ONE_YEAR","initHeaders","headers","get","Headers","hasUnCacheableHeader","cacheKey","doOriginalFetch","then","res","incrementalCache","clonedRes","clone","base64Body","string","Uint8Array","arrayBuffer","forEach","byte","String","fromCharCode","btoa","Buffer","from","toString","set","data","Object","fromEntries","entries","body","err","console","warn","fetchCacheKey","entry","value","isRevalidate","isStale","pendingRevalidates","push","catch","error","resData","decodedBody","atob","Response","status","isStaticGeneration","dynamicUsageReason","pathname","dynamicUsageStack","stack","dynamicUsageDescription","hasNextConfig","forceDynamic"],"mappings":"AAAA;;;;QASgBA,UAAU,GAAVA,UAAU;AARI,IAAA,UAAmB,WAAnB,mBAAmB,CAAA;AACb,IAAA,OAAgB,WAAhB,gBAAgB,CAAA;AACrB,IAAA,WAAqB,WAArB,qBAAqB,CAAA;AAEpD,MAAMC,aAAa,GAAGC,OAAO,CAACC,GAAG,CAACC,YAAY,KAAK,MAAM;AAIlD,SAASJ,UAAU,CAAC,EACzBK,WAAW,CAAA,EACXC,4BAA4B,CAAA,EAI7B,EAAE;IACD,IAAI,AAACC,UAAU,CAACC,KAAK,CAASC,OAAO,EAAE,OAAM;IAE7C,MAAM,EAAEC,kBAAkB,CAAA,EAAE,GAAGL,WAAW;IAE1C,MAAMM,WAAW,GAAGH,KAAK;IAEzB,0CAA0C;IAC1C,8CAA8C;IAC9CA,KAAK,GAAGI,CAAAA,GAAAA,OAAS,AAAE,CAAA,UAAF,EAAE,CAACC,IAAI,CACtBC,UAAa,cAAA,CAACN,KAAK,EACnB;QACEO,IAAI,EAAEC,OAAQ,SAAA,CAACC,MAAM;KACtB,EACD,OAAOC,KAAwB,EAAEC,IAA6B,GAAK;YAMnC,GAAmB,EAK7BA,IAAU,EAgBrB,IAA0B;QA1BnC,MAAMC,qBAAqB,GAAGd,4BAA4B,CAACe,QAAQ,EAAE;QAErE,iEAAiE;QACjE,iEAAiE;QACjE,wBAAwB;QACxB,IAAI,CAACD,qBAAqB,IAAI,CAAA,CAAA,GAAmB,GAAlBD,IAAI,QAAM,GAAVA,KAAAA,CAAU,GAAVA,IAAI,CAAEG,IAAI,SAAkB,GAA7B,KAAA,CAA6B,GAA7B,GAAmB,CAAEC,QAAQ,CAAA,EAAE;YAC3D,OAAOZ,WAAW,CAACO,KAAK,EAAEC,IAAI,CAAC,CAAA;SAChC;QAED,IAAIK,UAAU,GAA+BC,SAAS;QACtD,IAAIC,aAAa,GAAGP,IAAI,QAAM,GAAVA,KAAAA,CAAU,GAAVA,CAAAA,IAAU,GAAVA,IAAI,CAAEG,IAAI,SAAA,GAAVH,KAAAA,CAAU,GAAVA,IAAU,CAAEK,UAAU,AAAZ;QAE9B,IAAIL,CAAAA,IAAI,QAAO,GAAXA,KAAAA,CAAW,GAAXA,IAAI,CAAEQ,KAAK,CAAA,KAAK,aAAa,EAAE;YACjCD,aAAa,GAAG,KAAK;SACtB;QACD,IAAI;YAAC,UAAU;YAAE,UAAU;SAAC,CAACE,QAAQ,CAACT,CAAAA,IAAI,QAAO,GAAXA,KAAAA,CAAW,GAAXA,IAAI,CAAEQ,KAAK,CAAA,IAAI,EAAE,CAAC,EAAE;YACxDD,aAAa,GAAG,CAAC;SAClB;QACD,IAAI,OAAOA,aAAa,KAAK,QAAQ,EAAE;YACrCF,UAAU,GAAGE,aAAa;SAC3B;QAED,IAAIA,aAAa,KAAK,KAAK,EAAE;YAC3BF,UAAU,GAAGK,WAAc,eAAA;SAC5B;QACD,MAAMC,WAAW,GACf,OAAO,CAAA,CAAA,IAA0B,GAAzBX,IAAI,QAAS,GAAbA,KAAAA,CAAa,GAAbA,IAAI,CAAEY,OAAO,SAAiB,GAA/B,KAAA,CAA+B,GAA/B,IAA0B,CAAEC,GAAG,CAAA,KAAK,UAAU,GAChDb,IAAI,QAAS,GAAbA,KAAAA,CAAa,GAAbA,IAAI,CAAEY,OAAO,GACd,IAAIE,OAAO,CAACd,CAAAA,IAAI,QAAS,GAAbA,KAAAA,CAAa,GAAbA,IAAI,CAAEY,OAAO,CAAA,IAAI,EAAE,CAAC;QAEtC,MAAMG,oBAAoB,GACxBJ,WAAW,CAACE,GAAG,CAAC,eAAe,CAAC,IAAIF,WAAW,CAACE,GAAG,CAAC,QAAQ,CAAC;QAE/D,IAAI,OAAOR,UAAU,KAAK,WAAW,EAAE;YACrC,uDAAuD;YACvD,wDAAwD;YACxD,IAAIU,oBAAoB,EAAE;gBACxBV,UAAU,GAAG,CAAC;aACf,MAAM;gBACLA,UAAU,GACR,OAAOJ,qBAAqB,CAACI,UAAU,KAAK,SAAS,IACrD,OAAOJ,qBAAqB,CAACI,UAAU,KAAK,WAAW,GACnDK,WAAc,eAAA,GACdT,qBAAqB,CAACI,UAAU;aACvC;SACF;QAED,IACE,OAAOJ,qBAAqB,CAACI,UAAU,KAAK,WAAW,IACtD,OAAOA,UAAU,KAAK,QAAQ,IAC7BA,UAAU,GAAGJ,qBAAqB,CAACI,UAAU,AAAC,EAChD;YACAJ,qBAAqB,CAACI,UAAU,GAAGA,UAAU;SAC9C;QAED,IAAIW,QAAQ,AAAoB;QAEhC,MAAMC,eAAe,GAAG,UAAY;YAClC,OAAOzB,WAAW,CAACO,KAAK,EAAEC,IAAI,CAAC,CAACkB,IAAI,CAAC,OAAOC,GAAG,GAAK;gBAClD,IACElB,qBAAqB,CAACmB,gBAAgB,IACtCJ,QAAQ,IACR,OAAOX,UAAU,KAAK,QAAQ,IAC9BA,UAAU,GAAG,CAAC,EACd;oBACA,MAAMgB,SAAS,GAAGF,GAAG,CAACG,KAAK,EAAE;oBAE7B,IAAIC,UAAU,GAAG,EAAE;oBAEnB,IAAIxC,OAAO,CAACC,GAAG,CAACC,YAAY,KAAK,MAAM,EAAE;wBACvC,IAAIuC,MAAM,GAAG,EAAE;wBACf,IAAIC,UAAU,CAAC,MAAMJ,SAAS,CAACK,WAAW,EAAE,CAAC,CAACC,OAAO,CAAC,CAACC,IAAI,GAAK;4BAC9DJ,MAAM,IAAIK,MAAM,CAACC,YAAY,CAACF,IAAI,CAAC;yBACpC,CAAC;wBACFL,UAAU,GAAGQ,IAAI,CAACP,MAAM,CAAC;qBAC1B,MAAM;wBACLD,UAAU,GAAGS,MAAM,CAACC,IAAI,CAAC,MAAMZ,SAAS,CAACK,WAAW,EAAE,CAAC,CAACQ,QAAQ,CAC9D,QAAQ,CACT;qBACF;oBAED,IAAI;wBACF,MAAMjC,qBAAqB,CAACmB,gBAAgB,CAACe,GAAG,CAC9CnB,QAAQ,EACR;4BACEpB,IAAI,EAAE,OAAO;4BACbwC,IAAI,EAAE;gCACJxB,OAAO,EAAEyB,MAAM,CAACC,WAAW,CAACjB,SAAS,CAACT,OAAO,CAAC2B,OAAO,EAAE,CAAC;gCACxDC,IAAI,EAAEjB,UAAU;6BACjB;4BACDlB,UAAU;yBACX,EACDA,UAAU,EACV,IAAI,CACL;qBACF,CAAC,OAAOoC,GAAG,EAAE;wBACZC,OAAO,CAACC,IAAI,CAAC,CAAC,yBAAyB,CAAC,EAAE5C,KAAK,EAAE0C,GAAG,CAAC;qBACtD;iBACF;gBACD,OAAOtB,GAAG,CAAA;aACX,CAAC,CAAA;SACH;QAED,IACElB,qBAAqB,CAACmB,gBAAgB,IACtC,OAAOf,UAAU,KAAK,QAAQ,IAC9BA,UAAU,GAAG,CAAC,EACd;YACAW,QAAQ,GAAG,MAAMf,qBAAqB,CAACmB,gBAAgB,CAACwB,aAAa,CACnE7C,KAAK,CAACmC,QAAQ,EAAE,EAChBlC,IAAI,CACL;YACD,MAAM6C,KAAK,GAAG,MAAM5C,qBAAqB,CAACmB,gBAAgB,CAACP,GAAG,CAC5DG,QAAQ,EACR,IAAI,CACL;YAED,IAAI6B,CAAAA,KAAK,QAAO,GAAZA,KAAAA,CAAY,GAAZA,KAAK,CAAEC,KAAK,CAAA,IAAID,KAAK,CAACC,KAAK,CAAClD,IAAI,KAAK,OAAO,EAAE;gBAChD,wDAAwD;gBACxD,gDAAgD;gBAChD,IAAI,CAACK,qBAAqB,CAAC8C,YAAY,IAAI,CAACF,KAAK,CAACG,OAAO,EAAE;oBACzD,IAAIH,KAAK,CAACG,OAAO,EAAE;wBACjB,IAAI,CAAC/C,qBAAqB,CAACgD,kBAAkB,EAAE;4BAC7ChD,qBAAqB,CAACgD,kBAAkB,GAAG,EAAE;yBAC9C;wBACDhD,qBAAqB,CAACgD,kBAAkB,CAACC,IAAI,CAC3CjC,eAAe,EAAE,CAACkC,KAAK,CAACT,OAAO,CAACU,KAAK,CAAC,CACvC;qBACF;oBAED,MAAMC,OAAO,GAAGR,KAAK,CAACC,KAAK,CAACV,IAAI;oBAChC,IAAIkB,WAAW,GAAG,EAAE;oBAEpB,wCAAwC;oBACxC,IAAIvE,OAAO,CAACC,GAAG,CAACC,YAAY,KAAK,MAAM,EAAE;wBACvCqE,WAAW,GAAGC,IAAI,CAACF,OAAO,CAACb,IAAI,CAAC;qBACjC,MAAM;wBACLc,WAAW,GAAGtB,MAAM,CAACC,IAAI,CAACoB,OAAO,CAACb,IAAI,EAAE,QAAQ,CAAC,CAACN,QAAQ,EAAE;qBAC7D;oBAED,OAAO,IAAIsB,QAAQ,CAACF,WAAW,EAAE;wBAC/B1C,OAAO,EAAEyC,OAAO,CAACzC,OAAO;wBACxB6C,MAAM,EAAEJ,OAAO,CAACI,MAAM;qBACvB,CAAC,CAAA;iBACH;aACF;SACF;QAED,IAAIxD,qBAAqB,CAACyD,kBAAkB,EAAE;YAC5C,IAAI1D,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;gBACpC,MAAMQ,KAAK,GAAGR,IAAI,CAACQ,KAAK;gBACxB,oEAAoE;gBACpE,IAAI1B,aAAa,EAAE;oBACjB,OAAOkB,IAAI,CAACQ,KAAK;iBAClB;gBACD,IAAIA,KAAK,KAAK,UAAU,EAAE;oBACxBP,qBAAqB,CAACI,UAAU,GAAG,CAAC;oBACpC,mDAAmD;oBACnD,wCAAwC;oBACxC,MAAMsD,kBAAkB,GAAG,CAAC,eAAe,EAAE5D,KAAK,CAAC,EACjDE,qBAAqB,CAAC2D,QAAQ,GAC1B,CAAC,CAAC,EAAE3D,qBAAqB,CAAC2D,QAAQ,CAAC,CAAC,GACpC,EAAE,CACP,CAAC;oBACF,MAAMnB,GAAG,GAAG,IAAIlD,kBAAkB,CAACoE,kBAAkB,CAAC;oBACtD1D,qBAAqB,CAAC4D,iBAAiB,GAAGpB,GAAG,CAACqB,KAAK;oBACnD7D,qBAAqB,CAAC8D,uBAAuB,GAAGJ,kBAAkB;oBAElE,MAAMlB,GAAG,CAAA;iBACV;gBAED,MAAMuB,aAAa,GAAG,MAAM,IAAIhE,IAAI;gBACpC,MAAMG,IAAI,GAAGH,IAAI,CAACG,IAAI,IAAI,EAAE;gBAC5B,IACE,OAAOA,IAAI,CAACE,UAAU,KAAK,QAAQ,IACnC,CAAC,OAAOJ,qBAAqB,CAACI,UAAU,KAAK,WAAW,IACtDF,IAAI,CAACE,UAAU,GAAGJ,qBAAqB,CAACI,UAAU,CAAC,EACrD;oBACA,MAAM4D,YAAY,GAAGhE,qBAAqB,CAACgE,YAAY;oBAEvD,IAAI,CAACA,YAAY,IAAI9D,IAAI,CAACE,UAAU,KAAK,CAAC,EAAE;wBAC1CJ,qBAAqB,CAACI,UAAU,GAAGF,IAAI,CAACE,UAAU;qBACnD;oBAED,IAAI,CAAC4D,YAAY,IAAI9D,IAAI,CAACE,UAAU,KAAK,CAAC,EAAE;wBAC1C,MAAMsD,kBAAkB,GAAG,CAAC,YAAY,EACtCxD,IAAI,CAACE,UAAU,CAChB,OAAO,EAAEN,KAAK,CAAC,EACdE,qBAAqB,CAAC2D,QAAQ,GAC1B,CAAC,CAAC,EAAE3D,qBAAqB,CAAC2D,QAAQ,CAAC,CAAC,GACpC,EAAE,CACP,CAAC;wBACF,MAAMnB,GAAG,GAAG,IAAIlD,kBAAkB,CAACoE,kBAAkB,CAAC;wBACtD1D,qBAAqB,CAAC4D,iBAAiB,GAAGpB,GAAG,CAACqB,KAAK;wBACnD7D,qBAAqB,CAAC8D,uBAAuB,GAAGJ,kBAAkB;wBAElE,MAAMlB,GAAG,CAAA;qBACV;iBACF;gBACD,IAAIuB,aAAa,EAAE,OAAOhE,IAAI,CAACG,IAAI;aACpC;SACF;QAED,OAAOc,eAAe,EAAE,CAAA;KACzB,CACF,CACA;IAAC7B,UAAU,CAACC,KAAK,CAASC,OAAO,GAAG,IAAI;CAC1C"}